<% breadcrumb :project, @project %>
<% provide(@project.name) %>
<div class="row">
  <aside class="col-md-2">
    <section class="project-info">
      <h1>
        <%= @project.name %>
      </h1>
    </section>
    <section>
      <p><%= t("activerecord.attributes.project.description") %></p>
      <%= @project.description %>
    </section>
    <section>
      <p><%= t("activerecord.attributes.project.due_on") %></p>
      <%= @project.due_on %>
    </section>
    <p><%= link_to t("project.tickets.create"), new_project_ticket_path(@project) %></p>
  </aside>
  <div class="col-md-8">
    <section class="ticket-items">
      <ul>
        <h2><%= t("project.title.show.tickets") %></h4>
        <% provide(:button_text, t("ransack.search")) %>
        <% provide(:link_to, project_path(@project)) %>
        <% provide(:search_button_offset, "8") %>
        <%= render 'tickets/search_form'%>

        <% @tickets.each do |ticket| %>
          <ul>
            <%= link_to ticket.title, project_ticket_path(@project, ticket) %>
            <p><%= ticket.description %></p>
          </ul>
        <% end %>
        <div class='pagination-items'>
          <%= paginate @tickets %>
        </div>
      </ul>
    </section>
  </div>
  <div class="col-md-2">
    <h2><%= I18n.t("project.project_member.index") %></h2>
    <% @project.project_members.where(accepted_project_invitation: true).includes(:user).each do |project_member| %>
      <ul><%= project_member.user.name %></ul>
    <% end %>
    <% if @project.owners.include?(current_user) %>
      <%= link_to t("project.project_member.create"), new_user_invitation_path(project_id: @project) %>
    <% end %>
  </div>
</div>